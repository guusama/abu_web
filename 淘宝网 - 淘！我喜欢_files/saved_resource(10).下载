KISSY.add("tbr/comp/textInput2",["base","ua","node","util","kg/placeholder/6.0.0/index"],function(t,e,n,i){var r=e("base"),o=e("ua"),a=e("node"),s=e("util"),l=e("kg/placeholder/6.0.0/index"),u=o,c=u.ie||u.firefox||u.safari||u.chrome,d=function(e,n){var i=this;d.superclass.constructor.apply(this,arguments),this.textInputNode=e,n&&n.selectAll&&(this._selectAll=!0),n&&!t.isUndefined(n.aria)&&this.set("aira",n.aria),this.get("aria")&&(this.textInputNode.attr("role","textbox"),n&&n.label&&this.set("label",n.label)),this.valueBeforeChange="",new l({"node":this.textInputNode,"wapperNode":a.all(this.textInputNode).parent(".conve-combox")}),this.isPasteDisabled="disabled"==this.textInputNode.attr("data-paste"),this.textInputNode.on("focus",function(){var e=i.getValue();i.textInputNode;i._blurTimeout&&(t.log("[text-input]blurring is cancelled"),i._blurTimeout.cancel(),i._blurTimeout=null),i.fire("focus"),""!=e&&i.selectAll(),i.valueBeforeChange=e}).on("keydown",function(t){var e=t.keyCode;i.isPasteDisabled||t.ctrlKey&&86==e&&t.preventDefault(),i.fire("keydown",t)}).on("keyup",function(e){var n,r=i.getValue();n=t.trim(r),n!=r&&(this.value=n),i.fire("keyup",e)}).on("blur",function(e){t.log("[text-input]blurring is delayed"),i._blurTimeout=t.later(function(){i.fire("blur",e)},150)}).on("change",function(e){i.fire("change",t.mix(e,{"preVal":i.valueBeforeChange,"newVal":i.getValue()}))}),c&&!i.isPasteDisabled&&this.textInputNode.on("paste contextmenu",function(t){t.preventDefault()})};return s.extend(d,r,{"getValue":function(){return this.textInputNode.val()},"load":function(e,n){var i=this.getValue();e=t.trim(e),e!=i&&(t.log("[text-input]load "+e),this.textInputNode.val(e),n||this.fire("change",{"preVal":i,"newVal":e}))},"updateMaxLength":function(t){t<0||(t<this.textInputNode.prop("maxLength")&&this.load(this.getValue().substring(0,t)),this.textInputNode.prop(t,t))},"selectAll":function(){if(this._selectAll){var e,n=this.textInputNode.getDOMNode(),i=n.value.length,r=100;o.ie?t.later(function(){e=n.createTextRange(),e.collapse(!0),e.moveStart("character",0),e.moveEnd("character",i),e.select()},r):t.later(function(){n.setSelectionRange(0,i)},r)}},"activate":function(){this.textInputNode.parent(".tbr-input").addClass("tbr-input-active")},"inactivate":function(){this.textInputNode.parent(".tbr-input").removeClass("tbr-input-active")}},{"ATTRS":{"aria":{"value":!0,"validator":function(e){return t.isBoolean(e)}},"label":{"value":"","validator":function(e){return t.isString(e)}}}}),d});