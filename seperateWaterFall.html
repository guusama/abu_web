<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>带有分散效果的瀑布流</title>
    <script src="http://libs.baidu.com/jquery/1.10.2/jquery.min.js"></script>
    <style type="text/css">
        *{padding: 0;margin:0;}
        #main{
            position: relative;
            -wedkit-column-width: 202px;
            -moz-column-width: 202px;
            -ms-column-width: 202px;
            -o-column-width: 202px;
            column-width: 202px;
        }
        .pin{
            padding: 15px 0 0 15px;
            float:left;
        }
        .box{
            padding: 10px;
            border:1px solid #ccc;
            box-shadow: 0 0 6px #ccc;
            border-radius: 5px;
        }
        .box img{
            width:162px;
            height:auto;
        }
    </style>
    <script>
        $( window ).on( "load", function(){
            // 调用waterfall函数
            var dataInt={'data':[{'src':'1.jpg'},{'src':'2.jpg'},{'src':'3.jpg'},{'src':'4.jpg'}]};
            window.onscroll=function(){
                // 拖动滚动条时
                if (checkscrollside){
                    $.each(dataInt.data,function (key,value) {
                        var img=value.src;
                        var div='<div class="box"><div class="pin"><img src="waterFallImages/'+img+'"/></div></div>';
                        $('#main').append(div);
                    })
                }
            }
        });
        function waterfall(){
            // 计算及定位数据块显示分散效果
        }

        function checkscrollside(){
            // 检测是否具备了加载数据块的条件
            var $lastBox=$('#main>div').last();
            var lastH=$lastBox.offset().top+Math.floor($lastBox.outerHeight()/2);
            var scrwinH=$(window).height()+$(window).scrollTop();
            return lastH<scrwinH?true:false;

        }

    </script>
</head>
<body>
<div id="main">
    <div class="pin">
        <div class="box">
            <img src="waterFallImages/1.jpg"/>
        </div>
    </div>
    <div class="pin">
        <div class="box">
            <img src="waterFallImages//2.jpg"/>
        </div>
    </div>
    <div class="pin">
        <div class="box">
            <img src="waterFallImages/3.jpg"/>
        </div>
    </div>
    <div class="pin">
        <div class="box">
            <img src="waterFallImages/4.jpg"/>
        </div>
    </div>
    <div class="pin">
        <div class="box">
            <img src="waterFallImages/5.jpg"/>
        </div>
    </div>
    <div class="pin">
        <div class="box">
            <img src="waterFallImages/6.jpg"/>
        </div>
    </div>
    <div class="pin">
        <div class="box">
            <img src="waterFallImages/7.jpg"/>
        </div>
    </div>
    <div class="pin">
        <div class="box">
            <img src="waterFallImages/8.jpg"/>
        </div>
    </div>
    <div class="pin">
        <div class="box">
            <img src="waterFallImages/9.jpg"/>
        </div>
    </div>
    <div class="pin">
        <div class="box">
            <img src="waterFallImages/10.jpg"/>
        </div>
    </div>
    <div class="pin">
        <div class="box">
            <img src="waterFallImages/11.jpg"/>
        </div>
    </div>
    <div class="pin">
        <div class="box">
            <img src="waterFallImages/12.jpg"/>
        </div>
    </div>
    <div class="pin">
        <div class="box">
            <img src="waterFallImages/13.jpg"/>
        </div>
    </div>
    <div class="pin">
        <div class="box">
            <img src="waterFallImages/14.jpg"/>
        </div>
    </div>
    <div class="pin">
        <div class="box">
            <img src="waterFallImages/15.jpg"/>
        </div>
    </div>
    <div class="pin">
        <div class="box">
            <img src="waterFallImages/16.jpg"/>
        </div>
    </div>
    <div class="pin">
        <div class="box">
            <img src="waterFallImages/17.jpg"/>
        </div>
    </div>
    <div class="pin">
        <div class="box">
            <img src="waterFallImages/18.jpg"/>
        </div>
    </div>
    <div class="pin">
        <div class="box">
            <img src="waterFallImages/19.jpg"/>
        </div>
    </div>
    <div class="pin">
        <div class="box">
            <img src="waterFallImages/20.jpg"/>
        </div>
    </div>
    <div class="pin">
        <div class="box">
            <img src="waterFallImages/21.jpg"/>
        </div>
    </div>
</div>

</body>
</html>